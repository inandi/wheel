"use strict";class Wheel{constructor(e){let F,t;this.dynamicId=e.dynamicId,this.source=e.source,this.records=e.data,this.counterShow=e.counterShow??!1,this.wheelfilterTogglerShow=e.wheelfilterTogglerShow??!1,this.wheelDataCenterString=this.dynamicId+"--data-center",this.wheelDataCenter=$("#"+this.wheelDataCenterString),this.wheelDataListString=this.dynamicId+"--data-list",this.wheelDataList=$("#"+this.wheelDataListString),this.wheelCanvasString=this.dynamicId+"--canvas",this.wheelCanvas=$("#"+this.wheelCanvasString),this.wheelCounterString=this.dynamicId+"--counter",this.wheelCounter=$("#"+this.wheelCounterString),this.wheelCounterStyle="",F=!0===this.counterShow?"gn--wheel-shown":"gn--wheel-hidden",t=!0===this.wheelfilterTogglerShow?"gn--wheel-shown":"gn--wheel-hidden";let C=`\n            <div class="gn--wheel-container">\n                <div id="${this.wheelDataCenterString}" class="gn--wheel-data-center">\n                    <h3>\n                        Data <input type="checkbox" class="gn--wheel-checkAll" checked />\n                    </h3>\n                    <div id="${this.wheelDataListString}">\n                    </div>\n                </div>\n                <div class="gn--wheel-filter-toggle ${t}">...</div>\n                <div class="gn--wheel-canvas-container">\n                    <canvas id="${this.wheelCanvasString}" width="1000" height="600">\n                    </canvas>\n                </div>\n                <div id="${this.wheelCounterString}" class="${F}">\n                </div>\n            </div>`;$("#"+e.sourceId).html(C),this.wheelDataCenter=$("#"+this.wheelDataCenterString),this.wheelDataList=$("#"+this.wheelDataListString),this.wheellist=$("<ul/>"),this.wheelfilterToggler=this.wheelDataCenter.closest(".gn--wheel-container").find(".gn--wheel-filter-toggle")}setup(){let e=this;var F="#333",t="#fff",C=Math.PI/2,n=2*Math.PI,E={timerHandle:0,timerDelay:33,angleCurrent:0,angleDelta:0,size:290,canvasContext:null,colors:["#000000","#0C090A","#34282C","#3B3131","#3A3B3C","#454545","#413839","#3D3C3A","#463E3F","#4C4646","#504A4B","#565051","#52595D","#5C5858","#625D5D","#666362","#696969","#686A6C","#6D6968","#726E6D","#736F6E","#757575","#797979","#837E7C","#808080","#848482","#8D918D","#A9A9A9","#B6B6B4","#C0C0C0","#C9C0BB","#D1D0CE","#CECECE","#D3D3D3","#DCDCDC","#E5E4E2","#BCC6CC","#98AFC7","#838996","#778899","#708090","#6D7B8D","#657383","#616D7E","#646D7E","#566D7E","#737CA1","#728FCE","#4863A0","#2B547E","#36454F","#29465B","#2B3856","#123456","#151B54","#191970","#000080","#151B8D","#00008B","#15317E","#0000A0","#0000A5","#0020C2","#0000CD","#0041C2","#2916F5","#0000FF","#0909FF","#1F45FC","#2554C7","#1569C7","#1974D2","#2B60DE","#4169E1","#2B65EC","#306EFF","#157DEC","#1589FF","#1E90FF","#368BC1","#4682B4","#488AC7","#357EC7","#3090C7","#659EC7","#87AFC7","#95B9C7","#6495ED","#6698FF","#56A5EC","#38ACEC","#00BFFF","#3BB9FF","#5CB3FF","#79BAEC","#82CAFF","#87CEFA","#87CEEB","#A0CFEC","#B7CEEC","#B4CFEC","#ADDFFF","#C2DFFF","#C6DEFF","#BDEDFF","#B0E0E6","#AFDCEC","#ADD8E6","#B0CFDE","#C9DFEC","#D5D6EA","#E3E4FA","#E6E6FA","#EBF4FA","#F0F8FF","#F8F8FF","#F0FFFF","#E0FFFF","#CCFFFF","#9AFEFF","#7DFDFE","#57FEFF","#00FFFF","#0AFFFF","#50EBEC","#4EE2EC","#16E2F5","#8EEBEC","#AFEEEE","#CFECEC","#81D8D0","#77BFC7","#92C7C7","#78C7C7","#7BCCB5","#66CDAA","#AAF0D1","#7FFFD4","#93FFE8","#40E0D0","#48D1CC","#48CCCD","#46C7C7","#43C6DB","#00CED1","#43BFC7","#20B2AA","#3EA99F","#5F9EA0","#3B9C9C","#008B8B","#008080","#045F5F","#033E3E","#25383C","#2C3539","#3C565B","#4C787E","#5E7D7E","#307D7E","#348781","#438D80","#4E8975","#306754","#2E8B57","#31906E","#00A36C","#34A56F","#50C878","#3EB489","#3CB371","#78866B","#848B79","#617C58","#728C00","#6B8E23","#808000","#556B2F","#4B5320","#667C26","#4E9258","#387C44","#347235","#347C2C","#228B22","#008000","#006400","#046307","#254117","#437C17","#347C17","#6AA121","#4AA02C","#41A317","#12AD2B","#3EA055","#73A16C","#6CBB3C","#6CC417","#4CC417","#32CD32","#52D017","#4CC552","#54C571","#99C68E","#8FBC8F","#89C35C","#85BB65","#9CB071","#B0BF1A","#B2C248","#9DC209","#A1C935","#9ACD32","#77DD77","#7FE817","#59E817","#57E964","#16F529","#5EFB6E","#36F57F","#00FF7F","#00FA9A","#5FFB17","#00FF00","#7CFC00","#66FF00","#7FFF00","#87F717","#98F516","#B1FB17","#ADFF2F","#BDF516","#DAEE01","#E2F516","#CCFB5D","#BCE954","#64E986","#90EE90","#6AFB92","#98FB98","#98FF98","#B5EAAA","#E3F9A6","#C3FDB8","#DBF9DB","#F0FFF0","#F5FFFA","#FFFACD","#FFFFC2","#FFFFCC","#FFFDD0","#FAFAD2","#FFFFE0","#F5F5DC","#FFF8DC","#FBF6D9","#F7E7CE","#FAEBD7","#FFEFD5","#FFEBCD","#FFE4C4","#F5DEB3","#FFE4B5","#FFE5B4","#FED8B1","#FFDAB9","#FFDEAD","#FBE7A1","#F3E3C3","#F0E2B6","#F1E5AC","#F3E5AB","#ECE5B6","#E8E4C9","#EEE8AA","#F0E68C","#EDDA74","#EDE275","#FFE87C","#FFF380","#FAF884","#FFFF33","#FFFF00","#FFEF00","#F5E216","#FFDB58","#FFDF00","#F9DB24","#FFD801","#FFD700","#FDD017","#FFCE44","#EAC117","#F6BE00","#F2BB66","#FBB917","#FBB117","#FFAE42","#FFA62F","#FFA500","#EE9A4D","#F4A460","#E2A76F","#C19A6B","#E6BF83","#DEB887","#D2B48C","#C8AD7F","#C2B280","#BCB88A","#C8B560","#C9BE62","#BDB76B","#BAB86C","#B5A642","#C7A317","#D4AF37","#E9AB17","#E8A317","#DAA520","#D4A017","#C68E17","#B8860B","#C58917","#CD853F","#CD7F32","#C88141","#B87333","#AA6C39","#AB784E","#966F33","#806517","#665D1E","#8E7618","#8B8000","#827839","#8A865D","#AF9B60","#827B60","#786D5F","#483C32","#493D26","#513B1C","#3D3635","#3B2F2F","#43302E","#49413F","#5C3317","#654321","#704214","#804A00","#6F4E37","#835C3B","#7F5217","#7F462C","#A0522D","#8B4513","#8A4117","#7E3817","#7E3517","#954535","#C34A2C","#C04000","#C35817","#B86500","#B5651D","#B76734","#C36241","#CB6D51","#C47451","#D2691E","#CC6600","#E56717","#E66C2C","#FF6700","#FF5F1F","#F87217","#F88017","#FF8C00","#F87431","#FF7722","#E67451","#FF8040","#FF7F50","#F88158","#F9966B","#FFA07A","#E9967A","#E78A61","#DA8A67","#FA8072","#F08080","#F67280","#E77471","#F75D59","#E55451","#CD5C5C","#FF6347","#E55B3C","#FF4500","#FF0000","#FD1C03","#FF2400","#F62217","#F70D1A","#F62817","#E42217","#E41B17","#DC381F","#C24641","#C11B17","#B22222","#B21807","#A52A2A","#A70D2A","#9F000F","#931314","#990000","#990012","#8B0000","#800000","#8C001A","#7E191B","#800517","#660000","#551606","#560319","#3D0C02","#3F000F","#2B1B17","#550A35","#810541","#7D0541","#7D0552","#872657","#7E354D","#7F4E52","#7F525D","#7F5A58","#997070","#B38481","#BC8F8F","#C5908E","#C48793","#C48189","#E799A3","#D58A94","#E8ADAA","#C4AEAD","#ECC5C0","#FFCBA4","#F8B88B","#EDC9AF","#FFDDCA","#FDD7E4","#FFE6E8","#FFE4E1","#FFDFDD","#FFCCCB","#FBCFCD","#FBBBB9","#FFC0CB","#FFB6C1","#FAAFBE","#FAAFBA","#F9A7B0","#FEA3AA","#E7A1B0","#E38AAE","#F778A1","#E56E94","#DB7093","#D16587","#C25A7C","#C25283","#E75480","#F660AB","#FF69B4","#FC6C85","#F6358A","#F52887","#FF1493","#F535AA","#FD349C","#E45E9D","#E3319D","#E4287C","#E30B5D","#DC143C","#C32148","#C21E56","#C12869","#C12267","#CA226B","#C71585","#C12283","#B3446C","#B93B8F","#DA70D6","#DF73D4","#EE82EE","#F433FF","#FF00FF","#E238EC","#D462FF","#C45AEC","#BA55D3","#A74AC7","#B048B5","#D291BC","#915F6D","#7E587E","#614051","#583759","#5E5A80","#4E5180","#6A5ACD","#6960EC","#736AFF","#7B68EE","#7575CF","#6667AB","#6F2DA8","#6C2DC7","#6A0DAD","#5453A6","#483D8B","#4E387E","#571B7E","#4B0150","#36013F","#461B7E","#4B0082","#342D7E","#663399","#6A287E","#8B008B","#800080","#86608E","#9932CC","#9400D3","#8D38C9","#A23BEC","#B041FF","#842DCE","#8A2BE2","#7A5DC7","#7F38EC","#9D00FF","#8E35EF","#893BFF","#967BB6","#9370DB","#8467D7","#9172EC","#9E7BFF","#CCCCFF","#DCD0FF","#E0B0FF","#D891EF","#B666D2","#C38EC7","#C8A2C8","#DDA0DD","#E6A9EC","#F2A2E8","#F9B7FF","#C6AEC7","#D2B9D3","#D8BFD8","#E9CFEC","#FCDFFF","#EBDDE2","#E1D9D1","#E9E4D4","#EDE6D6","#FAF0DD","#F8F0E3","#F8F6F0","#FFF0F5","#FDEEF4","#FFF9E3","#FDF5E6","#FAF0E6","#FFF5EE","#FAF5EF","#FFFAF0","#FFFFF0","#FFFFF7","#F5F5F5","#FBFBF9","#FFFAFA","#FEFCFF","#FFFFFF"],segments:[],seg_colors:[],maxSpeed:Math.PI/16,upTime:1e3,downTime:5e3,spinStart:0,frames:0,centerX:300,centerY:300,spin:function(){0==E.timerHandle&&(E.spinStart=(new Date).getTime(),E.maxSpeed=Math.PI/(16+Math.random()),E.frames=0,E.timerHandle=setInterval(E.onTimerTick,E.timerDelay))},onTimerTick:function(){var F=(new Date).getTime()-E.spinStart,t=0,a=!1;for(E.frames++,E.draw(),F<E.upTime?(t=F/E.upTime,E.angleDelta=E.maxSpeed*Math.sin(t*C)):(t=F/E.downTime,E.angleDelta=E.maxSpeed*Math.sin(t*C+C),t>=1&&(a=!0)),E.angleCurrent+=E.angleDelta;E.angleCurrent>=n;)E.angleCurrent-=n;a&&(clearInterval(E.timerHandle),E.timerHandle=0,E.angleDelta=0,console&&console.log(E.frames/F*1e3+" FPS"));var i=E.angleDelta*(1e3/E.timerDelay)*60/(2*Math.PI);$("#"+e.wheelCounterString).html(Math.round(i)+" RPM")},init:function(e){try{E.initWheel(),E.initCanvas(),E.draw(),$.extend(E,e)}catch(e){alert("Wheel is not loaded "+e)}},initCanvas:function(){var F=$("#"+e.wheelCanvasString)[0];F.addEventListener("click",E.spin,!1),E.canvasContext=F.getContext("2d")},initWheel:function(){!function(e){for(var F,t,C=e.length;C;F=parseInt(Math.random()*C),t=e[--C],e[C]=e[F],e[F]=t);}(E.colors)},update:function(){var e,F=E.segments,t=F.length,C=E.colors,a=C.length,i=[];for(E.angleCurrent=.5/E.segments.length*n,e=0;e<t;e++)i.push(C[F[e].hashCode().mod(a)]);E.seg_color=i,E.draw()},draw:function(){E.clear(),E.drawWheel(),E.drawNeedle()},clear:function(){E.canvasContext.clearRect(0,0,1e3,800)},drawNeedle:function(){var e,C,a=E.canvasContext,i=E.centerX,l=E.centerY,D=i+E.size,r=E.segments.length;a.lineWidth=2,a.strokeStyle=F,a.fillStyle=t,a.beginPath(),a.moveTo(D-10,l),a.lineTo(D+10,l-10),a.lineTo(D+10,l+10),a.closePath(),a.stroke(),a.fill(),e=r-Math.floor(E.angleCurrent/n*r)-1,a.textAlign="left",a.textBaseline="middle",a.fillStyle=F,a.font="2em Arial",C=E.segments[e]||"Choose at least 1 record",a.fillText(C,D+20,l)},drawSegment:function(e,F,C){var n=E.canvasContext,a=E.centerX,i=E.centerY,l=E.size,D=E.seg_color,r=E.segments[e];n.beginPath(),n.moveTo(a,i),n.arc(a,i,l,F,C,!1),n.lineTo(a,i),n.closePath(),n.fillStyle=D[e],n.fill(),n.stroke(),n.save(),n.translate(a,i),n.rotate((F+C)/2),n.fillStyle=t,n.fillText(r.substr(0,20),l-15,0),n.restore()},drawWheel:function(){var e,C,a=E.canvasContext,i=E.angleCurrent,l=i,D=E.segments.length,r=E.centerX,B=E.centerY,s=E.size;for(a.lineWidth=1,a.strokeStyle=F,a.textBaseline="middle",a.textAlign="right",a.font="1em Arial",C=1;C<=D;C++)e=n*(C/D)+i,E.drawSegment(C-1,l,e),l=e;a.beginPath(),a.arc(r,B,20,0,n,!1),a.closePath(),a.fillStyle=t,a.fill(),a.stroke(),a.beginPath(),a.arc(r,B,s,0,n,!1),a.closePath(),a.lineWidth=10,a.stroke()}};let a=this.wheellist;$.each(e.records,(function(F,t){a.append($("<li/>").append($("<input />").attr({id:e.dynamicId+"-recrodset-"+F,name:t.name,value:t.name,type:"checkbox",checked:!0}).change((function(){var e=this,F=E.segments,t=F.indexOf(e.value);e.checked&&-1===t?F.push(e.value):e.checked||-1===t||F.splice(t,1),F.sort(),E.update()}))).append($("<label />").attr({for:e.dynamicId+"-recrodset-"+F}).text(t.name)))})),this.wheelDataList.append(this.wheellist),E.init(),$.each(this.wheelDataList.find("ul input:checked"),(function(e,F){E.segments.push(F.value)})),E.update(),this.wheelDataCenter.slideUp().data("open",!1);let i=this.wheelDataCenter;this.wheelfilterToggler.on("click",(function(){i.data("open")?i.slideUp().data("open",!1):i.slideDown().data("open",!0)}))}run(){try{this.setup()}catch(e){console.log("Wheel is not loaded "+e)}}}var generateDynamicStringForWheelID=(e=15)=>{let F="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",C=t.length;for(let n=0;n<e;n++)F+=t.charAt(Math.floor(Math.random()*C));return F};String.prototype.hashCode=function(){var e,F=5381;let t;for(e=0;e<this.length;e++)t=this.charCodeAt(e),F=(F<<5)+F+t,F&=F;return F},Number.prototype.mod=function(e){return(this%e+e)%e},$(".gn--wheel-checkAll").on("click",(function(){$(this).parent().next("div").find("input").prop("checked",$(this).prop("checked")).trigger("change")}));